<div class="reset-password-container">
  <div class="card">
    <div class="card-header">
      <h2>Reset Your Password</h2>
      <p class="subtitle">Create a new password for your account</p>
    </div>

    <div class="card-body">
      <form [formGroup]="resetPasswordForm" (ngSubmit)="onSubmit()">
        <div class="form-group">
          <label for="password">New Password</label>
          <div class="password-input-container">
            <input
              [type]="showPassword ? 'text' : 'password'"
              id="password"
              formControlName="password"
              class="form-control"
              [class.is-invalid]="f['password'].invalid && (f['password'].touched || f['password'].dirty)"
              placeholder="Enter your new password">
            <button
              type="button"
              class="password-toggle"
              (click)="togglePasswordVisibility('password')">
              <i class="icon" [class.icon-eye]="!showPassword" [class.icon-eye-off]="showPassword"></i>
            </button>
          </div>
          <div class="password-strength" *ngIf="f['password'].value">
            <div class="strength-bar">
              <div class="strength-fill" [style.width.%]="getPasswordStrengthPercentage()" 
                   [style.background-color]="getPasswordStrength().color"></div>
            </div>
            <span class="strength-text" [style.color]="getPasswordStrength().color">
              {{ getPasswordStrength().strength }}
            </span>
          </div>
          <div class="invalid-feedback" *ngIf="f['password'].invalid && f['password'].touched">
            <span *ngIf="f['password'].errors?.['required']">Password is required</span>
            <span *ngIf="f['password'].errors?.['minlength']">Password must be at least 8 characters</span>
            <span *ngIf="f['password'].errors?.['pattern']">
              Password must contain uppercase, lowercase, number and special character
            </span>
          </div>
        </div>

        <div class="form-group">
          <label for="confirmPassword">Confirm New Password</label>
          <div class="password-input-container">
            <input
              [type]="showConfirmPassword ? 'text' : 'password'"
              id="confirmPassword"
              formControlName="confirmPassword"
              class="form-control"
              [class.is-invalid]="f['confirmPassword'].invalid && (f['confirmPassword'].touched || f['confirmPassword'].dirty)"
              placeholder="Confirm your new password">
            <button
              type="button"
              class="password-toggle"
              (click)="togglePasswordVisibility('confirmPassword')">
              <i class="icon" [class.icon-eye]="!showConfirmPassword" [class.icon-eye-off]="showConfirmPassword"></i>
            </button>
          </div>
          <div class="invalid-feedback" *ngIf="f['confirmPassword'].invalid && f['confirmPassword'].touched">
            <span *ngIf="f['confirmPassword'].errors?.['required']">Please confirm your password</span>
            <span *ngIf="f['confirmPassword'].errors?.['passwordMismatch']">Passwords do not match</span>
          </div>
        </div>

        <button
          type="submit"
          class="btn btn-primary btn-block"
          [disabled]="loading || resetPasswordForm.invalid">
          <span *ngIf="loading" class="spinner"></span>
          {{ loading ? 'Resetting Password...' : 'Reset Password' }}
        </button>
      </form>

      <div class="text-center links">
        <a (click)="navigateToLogin()" class="link">Back to Login</a>
      </div>
    </div>
  </div>
</div>